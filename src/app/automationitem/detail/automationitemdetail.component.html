<!--
*author: Jewel Rana
*this component is auto generated by Code Generator for Automation List
*since 12th August 2020
-->

<!-- main app container -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
      {{ "automationitem" | translate }}
      <small>{{ "control_panel" | translate }}</small>
    </h1>
    <ol class="breadcrumb">
      <li>
        <a href="#"><i class="fa fa-cogs"></i> {{ "home" | translate }}</a>
      </li>
      <li class="active">{{ "automationitem" | translate }}</li>
    </ol>
  </section>

  <!-- Main content -->
  <section class="content">
    <div class="box">
      <div class="box-header">
        <h3 class="box-title">{{ "automationitem_detail" | translate }}</h3>
      </div>
      <!-- /.box-header -->

      <div class="box-body">
        <app-alert></app-alert>
        <div class="row">
          <div class="col-md-6 offset-md-3">
            <form [formGroup]="automationitemdetailForm" autocomplete="off">
              <input
                type="hidden"
                [(ngModel)]="automationitem.csrfNonce"
                formControlName="csrfNonce"
              />

              <div class="form-group">
                <label>{{ "automationitem_automationId" | translate }}</label>
                <input
                  type="text"
                  readonly
                  [(ngModel)]="automationitem.automationId"
                  formControlName="automationId"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid': isFormCheckRequired && f.automationId.errors
                  }"
                  autocomplete="off"
                />
                <div
                  *ngIf="isFormCheckRequired && f.automationId.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="f.automationId.errors.required">
                    {{ "automationitem_automationId" | translate }}
                    {{ "is_required" | translate }}
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label>{{ "automationitem_automationName" | translate }}</label>
                <input
                  type="text"
                  readonly
                  [(ngModel)]="automationitem.automationName"
                  formControlName="automationName"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid': isFormCheckRequired && f.automationName.errors
                  }"
                  autocomplete="off"
                />
                <div
                  *ngIf="isFormCheckRequired && f.automationName.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="f.automationName.errors.required">
                    {{ "automationitem_automationName" | translate }}
                    {{ "is_required" | translate }}
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label>{{
                  "automationitem_automationCriteria" | translate
                }}</label>
                <input
                  type="text"
                  [(ngModel)]="automationitem.automationCriteria"
                  formControlName="automationCriteria"
                  class="form-control"
                  autocomplete="off"
                />
              </div>
              <div class="form-group">
                <label>{{ "automationitem_development" | translate }}</label>
                <input
                  type="text"
                  [(ngModel)]="automationitem.development"
                  formControlName="development"
                  class="form-control"
                  autocomplete="off"
                />
              </div>

              <div formArrayName="addresses">
                <div *ngFor="let address of automationitemdetailForm.get('addresses')['controls']; let i=index" class="panel panel-default">
                  <div class="panel-heading">
                    <span>Contact {{i + 1}}</span>
                    <span class="glyphicon glyphicon-remove pull-right" *ngIf="automationitemdetailForm.get('addresses')['controls'].length > 1" (click)="removeAddress(i)"></span>
                  </div>
                  <div class="panel-body" [formGroupName]="i">
                    <div class="form-group col-xs-6">
                      <label>name</label>
                      <input type="text" class="form-control" formControlName="name">
                      <small [hidden]="address.controls.name.valid" class="text-danger">
                        name is required
                      </small>
                    </div>
                    <div class="form-group col-xs-6">
                      <label>email</label>
                      <input type="text" class="form-control" formControlName="email">
                      <small [hidden]="address.controls.name.valid" class="text-danger">
                        email is required
                      </small>
                    </div>
                  </div>
                </div>
              </div>

              <div class="margin-20">
                <a (click)="addAddress()" style="cursor: default">
                  Add another address +
                </a>
              </div> <br/>
              <div class="form-group">
                <label>{{ "automationitem_isActive" | translate }}</label>
                <br/>
                <input
                  type="checkbox"
                  [(ngModel)]="automationitem.isActive"
                  formControlName="isActive"
                  autocomplete="off"
                />
              </div>
              <div class="form-group">
                <label>{{ "automationitem_remarks" | translate }}</label>
                <input
                  type="text"
                  [(ngModel)]="automationitem.remarks"
                  formControlName="remarks"
                  class="form-control"
                  autocomplete="off"
                />
              </div>

              <div *ngIf="automationitem.componentId < 0" class="form-group">
                <button
                  class="btn btn-primary"
                  [disabled]="isSubmitted"
                  (click)="onSubmit()"
                >
                  <i class="fa fa-save"></i> {{ "btn_save_text" | translate }}
                </button>
              </div>

              <div *ngIf="automationitem.componentId >= 0" class="form-group">
                <button
                  class="btn btn-primary"
                  [disabled]="isSubmitted"
                  (click)="onSubmit()"
                >
                  <i class="fa fa-save"></i> {{ "btn_save_text" | translate }}
                </button>
                &nbsp;
                <button
                  class="btn btn-primary"
                  [disabled]="isSubmitted"
                  (click)="onDelete()"
                >
                  <i class="fa fa-remove"></i>
                  {{ "btn_delete_text" | translate }}
                </button>
              </div>
            </form>
            <button class="btn btn-primary" (click)="goBack()">
              <i class="fa fa-arrow-left"></i>
              {{ "btn_go_back_text" | translate }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
